<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Login/signup</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        header{
            display:flex;
            align-items:center;
            background-color:#0B3c5D;
            top:0;
            left:0;
            position: fixed;
            width:100%;
            height:100px;
            z-index: 10;
        }
        a{
            text-decoration:none;
        }
        .logo{
            color:#fff;
            font-weight:bold;
            font-size:2rem;
            margin-left:10px;
        }
        .mainBody{
            margin-top:100px;
            background-color:#F4F6F8;
            width:100%;
            min-height:100vh;
            display:flex;
            justify-content:center;
            align-items:center;
            padding:20px;
            box-sizing: border-box;
        }
        #controlButtons{
            display:flex;
            width:100%;
            background-color:#0B3c5D;
            border-radius:15px;
            overflow: hidden;
        }
        .box{
            background-color:#FFFDFA;
            width:90%;
            max-width:900px;
            min-height:500px;
            display:flex;
            box-shadow: 1px 1px 4px rgba(0,0,0,0.3);
            border-radius:15px;
            overflow:hidden;
        }
        .logorreg{
            width:50%;
            padding:15px;
            box-sizing: border-box;
        }
        .control{
            width:100%;
            background-color:#0B3c5D;
            color:#fff;
            font-weight:bold;
            font-size:20px;
            border:none;
            cursor:pointer;
            padding:10px 0;
        }
        #signSwitch{
            background-color:#FFFDFA;
            color:#0B3c5D;
        }
        #login, #register{
            display:flex;
            flex-direction:column;
            gap:10px;
            width:100%;
            justify-content:center;
            align-items:center;
            padding:10px;
        }
        #login{
            display:none;
        }
        input{
            border-radius:10px;
            height:35px;
            font-size:16px;
            width:100%;
            border:none;
            box-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            padding-left:8px;
            box-sizing:border-box;
        }
        .logReg{
            background-color:#0B3c5D;
            width:60%;
            height:40px;
            border-radius:15px;
            color:#FFFDFA;
            font-size:16px;
            border:none;
            cursor:pointer;
            margin-top:20px;
        }
        label{
            font-size:16px;
            font-weight:bold;
            color:#0B3c5D;
            align-self:flex-start;
        }
        .image{
            width:50%;
        }
        .image img{
            width:100%;
            height:100%;
            object-fit:cover;
        }

        /* Password wrappers */
        #myPass, #myPassReg, #myCpassReg{
            display:flex;
            width:100%;
            position: relative;
            align-items: center;
        }

        #myBtn, #myBtnReg, #myCBtnReg{
            position: absolute;
            right: 10px;
            background: none;
            border: none;
            color: #1F6AE1;
            font-weight: bold;
            cursor: pointer;
            font-size: 14px;
        }

        @media (max-width: 768px){
            .box{
                flex-direction:column;
            }
            .logorreg, .image{
                width:100%;
            }
            .image{
                display:none;
            }
        }
    </style>
</head>
<body>

<header>
    <a href="{{url_for('index')}}"><h3 class="logo">ESN</h3></a>
</header>

<section class="mainBody">
    <section class="box">

        <section class="logorreg">
            <div id="controlButtons">
                <button class="control" id="signSwitch" type="button">Sign up</button>
                <button class="control" id="logSwitch" type="button">Login</button>
            </div>

            <!-- Login Form -->
            <form action="{{url_for('tryLogin')}}" method="post" id="login">
                <label for="email">Email</label>
                <input name="email" placeholder="Enter email" type="email" id="email" required>

                <label for="password">Password</label>
                <div id="myPass">
                    <input name="password" placeholder="Enter password" type="password" id="password" required>
                    <button id="myBtn" type="button">Show</button>
                </div>

                <button type="submit" class="logReg" id="loginBtn">Login</button>
            </form>

            <!-- Registration Form -->
            <form action="{{url_for('tryRegister')}}" id="register" method="post">
                <label for="fname">First Name</label>
                <input name="fname" placeholder="Enter First name" type="text" id="fname" required>

                <label for="lname">Last Name</label>
                <input name="lname" placeholder="Enter Last name" type="text" id="lname" required>

                <label for="newEmail">Email</label>
                <input name="newEmail" placeholder="Enter email" type="email" id="newEmail" required>

                <label for="phoneNo">Phone Number</label>
                <input name="phoneNo" placeholder="Enter phone no" type="tel" id="phoneNo" required>

                <label for="newPassword">Password</label>
                <div id="myPassReg">
                    <input name="newPassword" placeholder="Enter password" type="password" id="newPassword" required>
                    <button id="myBtnReg" type="button">Show</button>
                </div>

                <label for="newCPassword">Confirm Password</label>
                <div id="myCpassReg">
                    <input placeholder="Confirm password" type="password" id="newCPassword" required>
                    <button id="myCBtnReg" type="button">Show</button>
                </div>

                <button type="submit" class="logReg" id="regButton">Register</button>
            </form>
        </section>

        <div class="image">
            <img src="static/estateNet.jpg" alt="cities connected via a network">
        </div>

        {% if msg %}
        <script>
            alert("Incorrect password or email, try again")
        </script>
        {% endif %}

    </section>
</section>

<script>
    const register = document.getElementById("register");
    const login = document.getElementById("login");
    const logSwitch = document.getElementById("logSwitch");
    const signSwitch = document.getElementById("signSwitch");

    logSwitch.addEventListener("click", () => {
        register.style.display = "none";
        login.style.display = "flex";

        logSwitch.style.backgroundColor = "#FFFDFA";
        logSwitch.style.color = "#0B3c5D";

        signSwitch.style.backgroundColor = "#0B3c5D";
        signSwitch.style.color = "#FFFDFA";
    });

    signSwitch.addEventListener("click", () => {
        login.style.display = "none";
        register.style.display = "flex";

        signSwitch.style.backgroundColor = "#FFFDFA";
        signSwitch.style.color = "#0B3c5D";

        logSwitch.style.backgroundColor = "#0B3c5D";
        logSwitch.style.color = "#FFFDFA";
    });

    // Show / Hide Login Password
    const pwd = document.getElementById("password");
    const toggleBtn = document.getElementById("myBtn");

    toggleBtn.addEventListener("click", () => {
        const isHidden = pwd.type === "password";
        pwd.type = isHidden ? "text" : "password";
        toggleBtn.textContent = isHidden ? "Hide" : "Show";
    });

    // Show / Hide Register Password
    const regPwd = document.getElementById("newPassword");
    const toggleRegBtn = document.getElementById("myBtnReg");

    toggleRegBtn.addEventListener("click", () => {
        const isHidden = regPwd.type === "password";
        regPwd.type = isHidden ? "text" : "password";
        toggleRegBtn.textContent = isHidden ? "Hide" : "Show";
    });

    // Show / Hide Confirm Password
    const cPwd = document.getElementById("newCPassword");
    const toggleCPwdBtn = document.getElementById("myCBtnReg");

    toggleCPwdBtn.addEventListener("click", () => {
        const isHidden = cPwd.type === "password";
        cPwd.type = isHidden ? "text" : "password";
        toggleCPwdBtn.textContent = isHidden ? "Hide" : "Show";
    });
</script>

</body>
</html>
